(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f4407236"],{"0007":function(e,t,n){"use strict";var a=n("aa57"),l=n.n(a);l.a},"0a0d":function(e,t,n){e.exports=n("e829")},"0bda":function(e,t,n){},"2f37":function(e,t,n){var a=n("63b6");a(a.S,"Date",{now:function(){return(new Date).getTime()}})},5378:function(e,t,n){"use strict";var a=n("0bda"),l=n.n(a);l.a},aa57:function(e,t,n){},b39f:function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"chart-container"},[n("el-col",{staticClass:"toolbar1",staticStyle:{height:"50px","padding-left":"10px","padding-top":"5px"},attrs:{span:24}},[n("el-form",{attrs:{inline:!0}},[n("el-form-item",{attrs:{label:"日期范围"}},[n("div",{staticClass:"block"},[n("el-date-picker",{staticStyle:{width:"220px"},attrs:{type:"daterange","value-format":"yyyy-MM-dd",size:"small",align:"center","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},model:{value:e.queryDate,callback:function(t){e.queryDate=t},expression:"queryDate"}})],1)]),n("el-form-item",{attrs:{label:"内容类型："}},[n("el-select",{staticStyle:{width:"160px"},attrs:{size:"small",clearable:"",placeholder:"请选择内容类型"},model:{value:e.contentType,callback:function(t){e.contentType=t},expression:"contentType"}},e._l(e.typeMapArr,function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),n("el-form-item",{attrs:{label:"内容提供商："}},[n("el-select",{staticStyle:{width:"200px"},attrs:{size:"small",clearable:"",placeholder:"请选择内容提供商"},model:{value:e.contentCP,callback:function(t){e.contentCP=t},expression:"contentCP"}},e._l(e.cps,function(e){return n("el-option",{key:e.id,attrs:{value:e.id,label:e.name}})}),1)],1),n("el-form-item",[n("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:e.getContentCPs}},[e._v("查询")])],1),n("el-form-item",{staticStyle:{float:"right"}},[n("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-download"},on:{click:e.handleExport}},[e._v("导出")])],1)],1)],1),n("el-table",{staticStyle:{width:"100%","padding-top":"10px"},attrs:{data:e.cpDetails,"highlight-current-row":"",stripe:"","header-cell-style":{color:"#3a8ee6"}}},[n("el-table-column",{attrs:{prop:"cp_name",label:"CP名称",align:"center"}}),n("el-table-column",{attrs:{prop:"online_num",label:"有效播放量",align:"center"}}),n("el-table-column",{attrs:{prop:"online_num",label:"有效播放量占比",align:"center"}}),n("el-table-column",{attrs:{prop:"online_num",label:"在线内容量",align:"center"}}),n("el-table-column",{attrs:{prop:"online_num",label:"在线内容量占比",align:"center"}}),n("el-table-column",{attrs:{prop:"online_num",label:"活跃内容量",align:"center"}}),n("el-table-column",{attrs:{prop:"online_num",label:"活跃内容量占比",align:"center"}})],1)],1)},l=[],i=n("0a0d"),r=n.n(i),o=n("4ec3"),s={data:function(){return{queryDate:[new Date((new Date).getTime()-6048e5),new Date((new Date).getTime()-864e5)],pickerOptions:{disabledDate:function(e){return e.getTime()>r()()},shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-6048e5),e.$emit("pick",[n,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,n=new Date;n.setTime(n.getTime()-2592e6),e.$emit("pick",[n,t])}}]},tApp:"",contentCP:"",contentType:"",cps:[],cpDetails:[],typeMap:{1:"纯音乐",2:"视频音乐",3:"电影",4:"电视剧"},typeMapArr:[{id:1,name:"纯音乐"},{id:2,name:"视频音乐"},{id:3,name:"电影"},{id:4,name:"电视剧"}]}},methods:{getContentCPs:function(){return this.queryDate?this.queryDate[1]<this.queryDate[0]&&(this.$message({showClose:!0,message:"结束日期必须大于开始日期！",type:"error"}),!1):(this.$message({showClose:!0,message:"请选择查询日期范围！",type:"warning"}),!1)},handleExport:function(){var e=this;if(0===this.tUserList.length)return this.$message({message:"表格无数据，导出异常！",type:"warning"}),!1;Promise.all([n.e("chunk-61154d27"),n.e("chunk-0156a942")]).then(function(){var t=n("39a0"),a=t.exportExcel,l=["日期","小时","实时订购"],i=["day","hour","online_num"],r=e.tUserList,o=e.formatJson(i,r);a(l,o,"实时在线excel")}.bind(null,n)).catch(n.oe)},formatJson:function(e,t){return t.map(function(t){return e.map(function(e){return t[e]})})},getAllCPS:function(){var e=this;Object(o["o"])().then(function(t){var n=t.businessCode,a=t.resultSet;"success"!==n?e.$message({message:"CP数据加载失败，请联系管理员！",type:"error"}):e.cps=a})}},created:function(){this.tApp=JSON.parse(sessionStorage.getItem("tApp")),this.getAllCPS()},mounted:function(){},updated:function(){}},c=s,p=(n("0007"),n("5378"),n("2877")),u=Object(p["a"])(c,a,l,!1,null,"d62f8fba",null);t["default"]=u.exports},e829:function(e,t,n){n("2f37"),e.exports=n("584a").Date.now}}]);