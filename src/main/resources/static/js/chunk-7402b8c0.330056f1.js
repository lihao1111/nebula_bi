(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7402b8c0"],{"0982":function(e,t,a){"use strict";var n=a("7a56e"),r=a.n(n);r.a},"0a0d":function(e,t,a){e.exports=a("e829")},"1fce":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"chart-container"},[a("el-col",{staticClass:"toolbar1",staticStyle:{height:"50px","padding-left":"10px","padding-top":"5px"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("div",{staticClass:"block"},[a("el-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd",size:"small",align:"center","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},model:{value:e.queryDate,callback:function(t){e.queryDate=t},expression:"queryDate"}})],1)]),a("el-form-item",[a("el-button",{attrs:{type:"primary ",size:"small",icon:"el-icon-search"},on:{click:e.getNewAddUser}},[e._v("查询")])],1)],1)],1),a("el-col",{attrs:{span:24}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.chartLoading,expression:"chartLoading"}],staticStyle:{width:"100%",height:"380px"},attrs:{id:"newAddUserDiv"}})]),a("div",{staticStyle:{padding:"0px 10px"}},[a("el-col",{staticStyle:{"margin-top":"10px",height:"40px","line-height":"40px","background-color":"rgba(17, 146, 175, 0.18)"},attrs:{span:24}},[a("span",{staticStyle:{padding:"10px",color:"#606266"}},[e._v("详细数据"),a("i",{staticClass:"el-icon-info"})]),a("el-link",{staticStyle:{float:"right","margin-right":"10px","font-weight":"bold"},attrs:{type:"primary",underline:!1,icon:"el-icon-download"},on:{click:e.handleExport}},[e._v("\n        导出数据\n      ")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tNewAddUserList,"highlight-current-row":"","header-cell-style":{"background-color":"#f2f2f2",color:"#3a8ee6","border-bottom":"1px #f2f2f2 solid"}}},[a("el-table-column",{attrs:{prop:"day",sortable:"",label:"日期",align:"center"}}),a("el-table-column",{attrs:{prop:"newAddNum",sortable:"",label:"新增用户数",align:"center"}}),a("el-table-column",{attrs:{prop:"retained1Num",sortable:"",label:"一日留存",align:"center"}}),a("el-table-column",{attrs:{prop:"retained1Prec",sortable:"",label:"一日留存率",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{color:"#1d8ce0","font-weight":"bold"}},[e._v(e._s(null==t.row.retained1Prec?"":t.row.retained1Prec+"%"))])]}}])}),a("el-table-column",{attrs:{prop:"retained3Num",sortable:"",label:"三日留存",align:"center"}}),a("el-table-column",{attrs:{prop:"retained7Num",sortable:"",label:"七日留存",align:"center"}}),a("el-table-column",{attrs:{prop:"retained30Num",sortable:"",label:"三十日留存",align:"center"}})],1)],1)],1)},r=[],i=a("e814"),s=a.n(i),o=a("0a0d"),l=a.n(o),d=a("4ec3"),c=a("313e"),u=a.n(c),p={data:function(){return{queryDate:[new Date((new Date).getTime()-6048e5),new Date((new Date).getTime()-864e5)],pickerOptions:{disabledDate:function(e){return e.getTime()>l()()},shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-6048e5),e.$emit("pick",[a,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,a=new Date;a.setTime(a.getTime()-2592e6),e.$emit("pick",[a,t])}}]},chartLoading:!1,tApp:"",tNewAddUserList:[],dataLegStr:[],dataX:[],dataSer:[]}},methods:{handleExport:function(){var e=this;if(0===this.tNewAddUserList.length)return this.$message({message:"表格无数据，导出异常！",type:"warning"}),!1;Promise.all([a.e("chunk-61154d27"),a.e("chunk-0156a942")]).then(function(){var t=a("39a0"),n=t.exportExcel,r=["日期","新增用户数","一日留存","一日留存率","三日留存","七日留存","三十日留存"],i=["day","newAddNum","retained1Num","retained1Prec","retained3Num","retained7Num","retained30Num"],s=e.tNewAddUserList,o=e.formatJson(i,s);n(r,o,"用户新增留存excel")}.bind(null,a)).catch(a.oe)},formatJson:function(e,t){return t.map(function(t){return e.map(function(e){return t[e]})})},getNewAddUser:function(){var e=this;if(!this.queryDate)return this.$message({showClose:!0,message:"请选择查询日期范围！",type:"error"}),!1;if(this.queryDate[1]<this.queryDate[0])return this.$message({showClose:!0,message:"结束日期必须大于开始日期！",type:"error"}),!1;var t=(this.queryDate[1].getTime()-this.queryDate[0].getTime())/864e5;if(t>31)return this.$message({showClose:!0,message:"日期范围过大，不建议操作",type:"warning"}),!1;this.chartLoading=!0,Object(d["y"])({startDate:this.queryDate[0],endDate:this.queryDate[1],platFormId:this.tApp.id}).then(function(t){var a=t.businessCode,n=t.resultSet;if(e.chartLoading=!1,"unauthenticated"===a)return e.$message({message:"未授权，请联系管理员！",type:"error"}),!1;"success"!==a?e.$message({message:"新增用户数据加载失败，请联系管理员！",type:"error"}):(e.tNewAddUserList=n,e.drawChartDatas())})},drawChartDatas:function(){this.dataLegStr=["新增用户","一日留存","三日留存","七日留存"],this.dataX=[],this.dataSer=[];var e=[],t=[],a=[],n=[];for(var r in this.tNewAddUserList)this.dataX.push(this.tNewAddUserList[r].day),e.push(null==this.tNewAddUserList[r].newAddNum?0:s()(this.tNewAddUserList[r].newAddNum)),t.push(null==this.tNewAddUserList[r].retained1Num?0:s()(this.tNewAddUserList[r].retained1Num)),a.push(null==this.tNewAddUserList[r].retained3Num?0:s()(this.tNewAddUserList[r].retained3Num)),n.push(null==this.tNewAddUserList[r].retained7Num?0:s()(this.tNewAddUserList[r].retained7Num));var i={border:!1,legend:{orient:"vertical",left:"center",bottom:"bottom",data:this.dataLegStr},grid:{left:"3%",right:"5%",bottom:"10%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:this.dataX},yAxis:{type:"value",name:"人数"},series:[{name:"新增用户",type:"line",smooth:!0,data:e},{name:"一日留存",type:"line",smooth:!0,data:t},{name:"三日留存",type:"line",smooth:!0,data:a},{name:"七日留存",type:"line",smooth:!0,data:n}],tooltip:{trigger:"axis"}};this.chartColumn=u.a.init(document.getElementById("newAddUserDiv")),this.chartColumn.clear(),this.chartColumn.setOption(i),window.onresize=this.chartColumn.resize}},created:function(){this.tApp=JSON.parse(sessionStorage.getItem("tApp")),this.getNewAddUser()},mounted:function(){},updated:function(){}},h=p,m=(a("0982"),a("b582"),a("2877")),g=Object(m["a"])(h,n,r,!1,null,"64a10210",null);t["default"]=g.exports},"2f37":function(e,t,a){var n=a("63b6");n(n.S,"Date",{now:function(){return(new Date).getTime()}})},"5d6b":function(e,t,a){var n=a("e53d").parseInt,r=a("a1ce").trim,i=a("e692"),s=/^[-+]?0[xX]/;e.exports=8!==n(i+"08")||22!==n(i+"0x16")?function(e,t){var a=r(String(e),3);return n(a,t>>>0||(s.test(a)?16:10))}:n},7445:function(e,t,a){var n=a("63b6"),r=a("5d6b");n(n.G+n.F*(parseInt!=r),{parseInt:r})},"7a56e":function(e,t,a){},a1ce:function(e,t,a){var n=a("63b6"),r=a("25eb"),i=a("294c"),s=a("e692"),o="["+s+"]",l="​",d=RegExp("^"+o+o+"*"),c=RegExp(o+o+"*$"),u=function(e,t,a){var r={},o=i(function(){return!!s[e]()||l[e]()!=l}),d=r[e]=o?t(p):s[e];a&&(r[a]=d),n(n.P+n.F*o,"String",r)},p=u.trim=function(e,t){return e=String(r(e)),1&t&&(e=e.replace(d,"")),2&t&&(e=e.replace(c,"")),e};e.exports=u},b582:function(e,t,a){"use strict";var n=a("ebaa"),r=a.n(n);r.a},b9e9:function(e,t,a){a("7445"),e.exports=a("584a").parseInt},e692:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},e814:function(e,t,a){e.exports=a("b9e9")},e829:function(e,t,a){a("2f37"),e.exports=a("584a").Date.now},ebaa:function(e,t,a){}}]);