(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-365ca804"],{"1ca0":function(e,t,a){},"5d6b":function(e,t,a){var n=a("e53d").parseInt,r=a("a1ce").trim,i=a("e692"),s=/^[-+]?0[xX]/;e.exports=8!==n(i+"08")||22!==n(i+"0x16")?function(e,t){var a=r(String(e),3);return n(a,t>>>0||(s.test(a)?16:10))}:n},"6a6d":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"chart-container"},[a("el-col",{staticClass:"toolbar1",staticStyle:{height:"50px","padding-left":"10px","padding-top":"5px"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("div",{staticClass:"block"},[a("el-date-picker",{attrs:{size:"small",type:"date","value-format":"yyyy-MM-dd",placeholder:"选择日期"},model:{value:e.queryDate,callback:function(t){e.queryDate=t},expression:"queryDate"}})],1)]),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:e.getFlowAna}},[e._v("查询")])],1)],1)],1),a("el-col",{attrs:{span:24}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.chartLoading,expression:"chartLoading"}],staticStyle:{width:"100%",height:"550px","margin-top":"10px"},attrs:{id:"flowAnaDiv"}})])],1)},r=[],i=a("e814"),s=a.n(i),o=a("4ec3"),c=a("313e"),l=a.n(c),d={data:function(){return{queryDate:new Date((new Date).getTime()-864e5),chartLoading:!1,tApp:"",flowAnaList:[],dataNodes:[],dataLinks:[]}},methods:{getFlowAna:function(){var e=this;if(!this.queryDate)return this.$message({showClose:!0,message:"请选择查询日期！",type:"error"}),!1;this.chartLoading=!0,Object(o["w"])({queryDate:this.queryDate,platFormId:this.tApp.id}).then(function(t){var a=t.businessCode,n=t.resultSet;if(e.chartLoading=!1,"unauthenticated"===a)return e.$message({message:"未授权，请联系管理员！",type:"error"}),!1;"success"!==a?e.$message({message:"页面流向数据加载失败，请联系管理员！",type:"error"}):(e.flowAnaList=n,null!=e.flowAnaList&&e.flowAnaList.length>0?e.drawFlowAnaChart():e.$message({message:"未加载到页面流向数据！",type:"warning"}))})},drawFlowAnaChart:function(){var e=this;this.dataNodes=[],this.dataLinks=[];var t=[];this.flowAnaList.forEach(function(a){var n=a.leaveNodeDesc,r=a.enterNodeDesc;-1===t.indexOf(n)&&(t.push(n),e.dataNodes.push({name:n})),-1===t.indexOf(r)&&(t.push(r),e.dataNodes.push({name:r})),e.dataLinks.push({source:a.leaveNodeDesc,target:a.enterNodeDesc,value:s()(a.link_num)})});var a={border:!1,title:{text:"页面流量层级走向图",x:"center",y:"top",borderColor:"#ccc",borderWidth:0,textStyle:{fontSize:16,fontStyle:"normal",fontWeight:"normal"}},tooltip:{trigger:"item",triggerOn:"mousemove"},grid:{left:"3%",right:"4%",bottom:"12%",containLabel:!0},series:[{type:"sankey",data:this.dataNodes,links:this.dataLinks,focusNodeAdjacency:"allEdges",itemStyle:{normal:{borderWidth:1,borderColor:"#aaa"}},lineStyle:{normal:{color:"rgb(108, 165, 211)"}}}]};this.chartColumn=l.a.init(document.getElementById("flowAnaDiv")),this.chartColumn.clear(),this.chartColumn.setOption(a),window.onresize=this.chartColumn.resize}},created:function(){this.tApp=JSON.parse(sessionStorage.getItem("tApp")),this.getFlowAna()},mounted:function(){},updated:function(){}},u=d,p=(a("db61"),a("2877")),h=Object(p["a"])(u,n,r,!1,null,"c1adc596",null);t["default"]=h.exports},7445:function(e,t,a){var n=a("63b6"),r=a("5d6b");n(n.G+n.F*(parseInt!=r),{parseInt:r})},a1ce:function(e,t,a){var n=a("63b6"),r=a("25eb"),i=a("294c"),s=a("e692"),o="["+s+"]",c="​",l=RegExp("^"+o+o+"*"),d=RegExp(o+o+"*$"),u=function(e,t,a){var r={},o=i(function(){return!!s[e]()||c[e]()!=c}),l=r[e]=o?t(p):s[e];a&&(r[a]=l),n(n.P+n.F*o,"String",r)},p=u.trim=function(e,t){return e=String(r(e)),1&t&&(e=e.replace(l,"")),2&t&&(e=e.replace(d,"")),e};e.exports=u},b9e9:function(e,t,a){a("7445"),e.exports=a("584a").parseInt},db61:function(e,t,a){"use strict";var n=a("1ca0"),r=a.n(n);r.a},e692:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},e814:function(e,t,a){e.exports=a("b9e9")}}]);