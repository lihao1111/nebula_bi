(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9a1e130a"],{"4d5c":function(e,t,s){},"5d6b":function(e,t,s){var a=s("e53d").parseInt,n=s("a1ce").trim,i=s("e692"),r=/^[-+]?0[xX]/;e.exports=8!==a(i+"08")||22!==a(i+"0x16")?function(e,t){var s=n(String(e),3);return a(s,t>>>0||(r.test(s)?16:10))}:a},"5ecd":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("section",{staticClass:"chart-container"},[s("el-col",{staticClass:"toolbar1",staticStyle:{height:"50px","padding-left":"10px","padding-top":"5px"},attrs:{span:24}},[s("el-form",{attrs:{inline:!0,model:e.filters}},[s("el-form-item",{attrs:{label:"账号:"}},[s("el-input",{attrs:{placeholder:"请输入账号",size:"small"},model:{value:e.filters.usename,callback:function(t){e.$set(e.filters,"usename",t)},expression:"filters.usename"}})],1),s("el-form-item",[s("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:e.getUserMsg}},[e._v("查询")])],1),s("el-form-item",{staticStyle:{float:"right"}},[s("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-circle-plus-outline"},on:{click:e.addNewUser}},[e._v("新增用户")])],1)],1)],1),s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loadTable,expression:"loadTable"}],staticStyle:{width:"100%","padding-top":"10px"},attrs:{data:e.tableData,"highlight-current-row":"",stripe:"","header-cell-style":{color:"#3a8ee6"}}},[s("el-table-column",{attrs:{label:"账号"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.editing?s("div",[s("el-input",{attrs:{type:"text",size:"small",placeholder:"请填写账号"},model:{value:t.row.username,callback:function(s){e.$set(t.row,"username",s)},expression:"scope.row.username"}})],1):s("div",[s("span",[e._v(e._s(t.row.username))])])]}}])}),s("el-table-column",{attrs:{label:"密码"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.editing?s("div",[s("el-input",{attrs:{type:"text",size:"small",placeholder:"请填写密码"},model:{value:t.row.password,callback:function(s){e.$set(t.row,"password",s)},expression:"scope.row.password"}})],1):s("div",{staticStyle:{color:"#50bfff"}},[s("span",[e._v(e._s(t.row.password))])])]}}])}),s("el-table-column",{attrs:{label:"真实姓名"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.editing?s("div",[s("el-input",{attrs:{type:"text",size:"small",placeholder:"请填写真实姓名"},model:{value:t.row.realname,callback:function(s){e.$set(t.row,"realname",s)},expression:"scope.row.realname"}})],1):s("div",[s("span",[e._v(e._s(t.row.realname))])])]}}])}),s("el-table-column",{attrs:{label:"性别"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.editing?s("div",[s("el-select",{attrs:{size:"small",placeholder:"请选择性别"},model:{value:t.row.gender,callback:function(s){e.$set(t.row,"gender",s)},expression:"scope.row.gender"}},[s("el-option",{attrs:{label:"男",value:1}}),s("el-option",{attrs:{label:"女",value:0}})],1)],1):s("div",[s("span",[e._v(e._s(1==t.row.gender?"男":"女"))])])]}}])}),s("el-table-column",{attrs:{label:"所属部门"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.editing?s("div",[s("el-select",{attrs:{size:"small",placeholder:"请选择分组"},model:{value:t.row.group_id,callback:function(s){e.$set(t.row,"group_id",s)},expression:"scope.row.group_id"}},[s("el-option",{attrs:{label:"市场销售部",value:1}}),s("el-option",{attrs:{label:"技术研发部",value:2}}),s("el-option",{attrs:{label:"综合管理部",value:3}}),s("el-option",{attrs:{label:"领导层",value:4}})],1)],1):s("div",[s("span",[e._v(e._s(e.groupMap[t.row.group_id]))])])]}}])}),s("el-table-column",{attrs:{label:"权限级别",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.editing?s("div",[s("el-input",{attrs:{type:"number",size:"small",max:10,placeholder:"请填写权限级别"},model:{value:t.row.type,callback:function(s){e.$set(t.row,"type",s)},expression:"scope.row.type"}})],1):s("div",[s("span",[e._v(e._s(t.row.type))])])]}}])}),s("el-table-column",{attrs:{label:"操作",align:"center",width:"280px"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-set-up"},on:{click:function(s){return e.handleAuth(t.$index,t.row)}}},[e._v("授权\n                ")]),t.row.editing?e._e():s("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-edit-outline"},on:{click:function(s){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑\n                ")]),t.row.editing?s("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-success"},on:{click:function(s){return e.handleSave(t.$index,t.row)}}},[e._v("保存\n                ")]):e._e(),t.row.editing?s("el-button",{attrs:{size:"mini",type:"warning",icon:"el-icon-warning"},on:{click:function(s){return e.handleCancel(t.$index,t.row)}}},[e._v("取消\n                ")]):e._e(),t.row.editing?e._e():s("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(s){return e.handleDelete(t.$index,t.row)}}},[e._v("删除\n                ")])]}}])})],1),s("el-dialog",{attrs:{title:"授权",visible:e.authFormVisible,"close-on-click-modal":!1,width:"450px"},on:{"update:visible":function(t){e.authFormVisible=t}}},[s("div",{attrs:{slot:"title"},slot:"title"},[s("span",[e._v("授权对象："),s("b",{staticStyle:{color:"#1d8ce0"}},[e._v(e._s(e.authUserName))])])]),s("el-form",[s("el-input",{attrs:{type:"hidden"},model:{value:e.chooseUserId,callback:function(t){e.chooseUserId=t},expression:"chooseUserId"}}),s("el-form-item",{attrs:{label:"权限列表"}},[s("el-scrollbar",{staticStyle:{height:"280px"}},[s("el-tree",{ref:"authTree",attrs:{data:e.treeList,"show-checkbox":"","node-key":"id",props:e.defaultProps,"highlight-current":"","default-expanded-keys":e.expendAuthData,"default-checked-keys":e.expendAuthData}})],1)],1)],1),s("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{nativeOn:{click:function(t){e.authFormVisible=!1}}},[e._v("取消")]),s("el-button",{attrs:{type:"primary",loading:e.authLoading},nativeOn:{click:function(t){return e.authSubmit(t)}}},[e._v("确定")])],1)],1)],1)},n=[],i=s("e814"),r=s.n(i),o=s("4ec3"),l={data:function(){return{tApp:"",filters:{usename:""},groupMap:{1:"市场销售部",2:"技术研发部",3:"综合管理部",4:"领导层"},loginUser:"",tableData:[],loadTable:!1,authLoading:!1,authFormVisible:!1,authUserName:"",chooseUserId:"",chooseUserType:"",expendAuthData:"",treeList:"",defaultProps:{children:"children",label:"name"}}},methods:{getUserMsg:function(){var e=this;this.loadTable=!0,Object(o["Q"])({usename:this.filters.usename}).then(function(t){var s=t.businessCode,a=t.resultSet;if(e.loadTable=!1,"unauthenticated"===s)return e.$message({message:"未授权，请联系管理员！",type:"error"}),!1;"success"!==s?e.$message({message:"用户数据加载失败，请联系管理员！",type:"error"}):e.tableData=a})},handleAuth:function(e,t){var s=this;if(t.editing)return this.$message({message:"正在编辑中，禁止授权",type:"error"}),!1;Object(o["P"])({id:t.id}).then(function(e){var a=e.businessCode,n=e.resultSet;"success"!==a?s.$message({message:t.realname+"权限数据加载失败，请联系管理员！",type:"error"}):(s.authUserName=t.realname,s.chooseUserId=t.id,s.chooseUserType=t.type,s.treeList=n,s.expendAuthData=[],s.treeList.forEach(function(e){e.children&&e.children.forEach(function(e){"1"===e.auth_code&&s.expendAuthData.push(r()(e.id))})}),s.authFormVisible=!0)})},authSubmit:function(){var e=this;if(r()(this.loginUser.type)<=r()(this.chooseUserType))return this.$message({message:"授权失败，授权人权限不足！",type:"error"}),!1;var t="";this.$refs.authTree.getCheckedKeys().forEach(function(e){e&&(t+=e+",")}),t=t.substr(0,t.length-1),this.authLoading=!0,Object(o["d"])({chooseUserId:this.chooseUserId,chooseKeys:t}).then(function(t){var s=t.businessCode;e.authLoading=!1,"success"!==s?e.$message({message:"授权失败，请联系管理员！",type:"error"}):(e.authFormVisible=!1,e.getUserMsg(),e.$message({message:"授权成功！",type:"success"}))})},handleEdit:function(e,t){this.$set(this.tableData[e],"editing",!0)},handleCancel:function(e,t){"newAdd"===t.flag?this.tableData.splice(e,1):(this.getUserMsg(),this.$set(this.tableData[e],"editing",!1))},addNewUser:function(){this.tableData=this.tableData||[],this.tableData.unshift({editing:!0,flag:"newAdd"})},handleSave:function(e,t){var s=this;return""===t.username?(this.$message({message:"账号不可以为空！",type:"warning"}),!1):""===t.password?(this.$message({message:"账号不可以为空！",type:"warning"}),!1):""===t.realname?(this.$message({message:"真实名称不可以为空！",type:"warning"}),!1):void Object(o["S"])(t).then(function(t){var a=t.businessCode;"success"!==a?s.$message({message:"用户保存失败，请联系管理员！",type:"error"}):(s.$set(s.tableData[e],"editing",!1),s.getUserMsg(),s.$message({message:"用户保存成功！",type:"success"}))})},handleDelete:function(e,t){var s=this;this.$confirm("确定删除该记录吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.id||s.$message({message:"请选择记录，进行删除！",type:"error"}),Object(o["i"])({id:t.id}).then(function(t){var a=t.businessCode;"success"!==a?s.$message({message:"用户保存失败，请联系管理员！",type:"error"}):(s.tableData.splice(e,1),s.getUserMsg(),s.$message({message:"用户删除成功！",type:"success"}))})})}},created:function(){this.tApp=JSON.parse(sessionStorage.getItem("tApp")),this.loginUser=JSON.parse(sessionStorage.getItem("user")),this.getUserMsg()},mounted:function(){},updated:function(){}},c=l,u=(s("d8cb"),s("6b5a"),s("2877")),d=Object(u["a"])(c,a,n,!1,null,"ef91fa6e",null);t["default"]=d.exports},"6b5a":function(e,t,s){"use strict";var a=s("c43e"),n=s.n(a);n.a},7445:function(e,t,s){var a=s("63b6"),n=s("5d6b");a(a.G+a.F*(parseInt!=n),{parseInt:n})},a1ce:function(e,t,s){var a=s("63b6"),n=s("25eb"),i=s("294c"),r=s("e692"),o="["+r+"]",l="​",c=RegExp("^"+o+o+"*"),u=RegExp(o+o+"*$"),d=function(e,t,s){var n={},o=i(function(){return!!r[e]()||l[e]()!=l}),c=n[e]=o?t(p):r[e];s&&(n[s]=c),a(a.P+a.F*o,"String",n)},p=d.trim=function(e,t){return e=String(n(e)),1&t&&(e=e.replace(c,"")),2&t&&(e=e.replace(u,"")),e};e.exports=d},b9e9:function(e,t,s){s("7445"),e.exports=s("584a").parseInt},c43e:function(e,t,s){},d8cb:function(e,t,s){"use strict";var a=s("4d5c"),n=s.n(a);n.a},e692:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},e814:function(e,t,s){e.exports=s("b9e9")}}]);