(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-44f3d62c","chunk-0156a942","chunk-2d0ba6db"],{"0a0d":function(t,e,a){t.exports=a("e829")},"10ce":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"chart-container"},[a("el-col",{staticClass:"toolbar1",staticStyle:{height:"50px","padding-left":"10px","padding-top":"5px"},attrs:{span:24}},[a("el-form",{attrs:{inline:!0}},[a("el-form-item",[a("div",{staticClass:"block"},[a("el-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd",size:"small",align:"center","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":t.pickerOptions},model:{value:t.queryDate,callback:function(e){t.queryDate=e},expression:"queryDate"}})],1)]),a("el-form-item",[a("el-button",{attrs:{type:"primary ",size:"small",icon:"el-icon-search"},on:{click:t.getSubjectList}},[t._v("查询")])],1),a("el-radio-group",{staticStyle:{float:"right","margin-top":"5px","margin-right":"10px"},attrs:{size:"small"},on:{change:t.chooseTypeVal},model:{value:t.chooseType,callback:function(e){t.chooseType=e},expression:"chooseType"}},[a("el-radio-button",{attrs:{label:"day"}},[t._v("日")])],1)],1)],1),a("el-col",{staticStyle:{position:"relative"},attrs:{span:24}},[a("div",{staticStyle:{position:"absolute","z-index":"1001",top:"10px",right:"10px"}},[a("el-radio-group",{attrs:{size:"small"},nativeOn:{change:function(e){return t.chooseValChart(e)}},model:{value:t.seledVal,callback:function(e){t.seledVal=e},expression:"seledVal"}},[a("el-radio-button",{attrs:{label:"pv"}},[t._v("PV")]),a("el-radio-button",{attrs:{label:"uv"}},[t._v("UV")])],1)],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.chartLoading,expression:"chartLoading"}],staticStyle:{width:"100%",height:"400px","margin-top":"10px","z-index":"1000"},attrs:{id:"subjectListDiv"}})]),a("div",{staticStyle:{padding:"0px 10px"}},[a("el-col",{staticStyle:{"margin-top":"10px",height:"40px","line-height":"40px","background-color":"rgba(17, 146, 175, 0.18)"},attrs:{span:24}},[a("span",{staticStyle:{padding:"10px",color:"#606266"}},[t._v("详细数据"),a("i",{staticClass:"el-icon-info"})]),a("el-link",{staticStyle:{float:"right","margin-right":"10px","font-weight":"bold"},attrs:{type:"primary",underline:!1,icon:"el-icon-download"},on:{click:t.handleExport}},[t._v("\n                导出数据\n            ")])],1),a("el-table",{staticStyle:{width:"100%",height:"640px"},attrs:{data:t.subjectList.slice((t.curpage-1)*t.pageSize,t.curpage*t.pageSize),"highlight-current-row":"","header-cell-style":{"background-color":"#f2f2f2",color:"#3a8ee6","border-bottom":"1px #f2f2f2 solid"}}},[a("el-table-column",{attrs:{prop:"day",label:"日期",align:"center"}}),a("el-table-column",{attrs:{prop:"name",label:"专题名称",align:"center"}}),a("el-table-column",{attrs:{prop:"pv",sortable:"",label:"PV",align:"center"}}),a("el-table-column",{attrs:{prop:"uv",sortable:"",label:"UV",align:"center"}})],1),a("el-col",{attrs:{span:24}},[a("el-pagination",{staticStyle:{float:"right"},attrs:{background:"","page-size":t.pageSize,total:t.totalSize,layout:"prev, pager, next"},on:{"current-change":t.handleCurrentChange}})],1)],1)],1)},i=[],r=(a("6c7b"),a("7f7f"),a("55dd"),a("e814")),o=a.n(r),s=a("0a0d"),c=a.n(s),l=a("4ec3"),u=a("313e"),p=a.n(u),d={data:function(){return{totalSize:0,curpage:1,pageSize:15,queryDate:[new Date((new Date).getTime()-6048e5),new Date((new Date).getTime()-864e5)],pickerOptions:{disabledDate:function(t){return t.getTime()>c()()},shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}}]},chartLoading:!1,tApp:"",subjectList:[],subjectListDraw:[],seledVal:"",chooseType:"",dataLegStr:[],dataX:[],dataYSer:[]}},methods:{handleCurrentChange:function(t){this.curpage=t},getSubjectList:function(){var t=this;return this.queryDate?this.queryDate[1]<this.queryDate[0]?(this.$message({message:"结束日期必须大于开始日期！",type:"error"}),!1):(this.chartLoading=!0,void Object(l["N"])({startDate:this.queryDate[0],endDate:this.queryDate[1],chooseType:this.chooseType,platFormId:this.tApp.id}).then(function(e){var a=e.businessCode,n=e.resultSet;if(t.chartLoading=!1,"unauthenticated"===a)return t.$message({message:"未授权，请联系管理员！",type:"error"}),!1;if("success"!==a)t.$message({message:"专题数据加载失败，请联系管理员！",type:"error"});else{t.subjectList=n,t.totalSize=t.subjectList.length,t.curpage=1,t.seledVal="pv";var i=[];t.subjectList.forEach(function(t){var e=t.code,a=null;i.forEach(function(t){var n=t.code;if(n===e)return a=t,!1}),null==a?(a={},a["code"]=t.code,a["pv"]=t.pv,a["uv"]=t.uv,i.push(a)):(a["pv"]+=o()(t.pv),a["uv"]+=o()(t.uv))}),i.sort(t.Compare("pv")),i=i.length>5?i.slice(0,5):i,t.subjectListDraw=t.subjectList;for(var r=t.subjectListDraw.length-1;r>=0;r--){var s=t.subjectListDraw[r],c=s.code,l=!1;i.forEach(function(t){var e=t.code;if(e==c)return l=!0,!1}),l||t.subjectListDraw.splice(r,1)}t.CoreChart(t.seledVal)}})):(this.$message({message:"请选择查询日期范围！",type:"error"}),!1)},Compare:function(t){return function(e,a){var n=e[t],i=a[t];return n<i?1:n>i?-1:0}},chooseTypeVal:function(t){this.chooseType=t,this.getSubjectList()},chooseValChart:function(){this.CoreChart(this.seledVal)},CoreChart:function(t){var e=this,a={};for(var n in this.dataLegStr=[],this.dataX=[],this.dataYSer=[],this.subjectListDraw){var i=this.subjectListDraw[n].day,r=this.subjectListDraw[n].name;-1===this.dataX.indexOf(i)&&this.dataX.push(i),-1===this.dataLegStr.indexOf(r)&&this.dataLegStr.push(r)}this.dataLegStr.forEach(function(n){a[n]=new Array(e.dataX.length).fill(0),e.subjectListDraw.forEach(function(i){if(i.name===n){var r=e.dataX.indexOf(i.day);a[n].splice(r,0,i[t])}}),a[n]=a[n].slice(0,e.dataX.length)});var o=0;for(var s in a){var c={};c["name"]=this.dataLegStr[o++],c["type"]="line",c["stack"]="总量",c["areaStyle"]={},c["smooth"]=!0,c["data"]=a[s],this.dataYSer.push(c)}this.showCharts(this.dataLegStr,this.dataX,this.dataYSer)},showCharts:function(t,e,a){var n={border:!1,tooltip:{trigger:"axis",axisPointer:{type:"cross",label:{backgroundColor:"#6a7985"}}},legend:{orient:"vertical",left:"center",bottom:"bottom",data:t},toolbox:{show:!1,feature:{saveAsImage:{}}},grid:{left:"3%",right:"5%",bottom:"10%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:e}],yAxis:[{type:"value"}],series:a};this.chartColumn=p.a.init(document.getElementById("subjectListDiv")),this.chartColumn.clear(),this.chartColumn.setOption(n),window.onresize=this.chartColumn.resize},handleExport:function(){var t=this;if(0===this.subjectList.length)return this.$message({message:"表格无数据，导出异常！",type:"warning"}),!1;a.e("chunk-61154d27").then(function(){var e=a("39a0"),n=e.exportExcel,i=["日期","专题名称","PV","UV"],r=["day","name","pv","uv"],o=t.subjectList,s=t.formatJson(r,o);n(i,s,"专题流量excel")}.bind(null,a)).catch(a.oe)},formatJson:function(t,e){return e.map(function(e){return t.map(function(t){return e[t]})})}},created:function(){this.tApp=JSON.parse(sessionStorage.getItem("tApp")),this.chooseType="day",this.getSubjectList()},mounted:function(){},updated:function(){}},h=d,f=(a("f17f5"),a("74bb"),a("2877")),g=Object(f["a"])(h,n,i,!1,null,"a475226a",null);e["default"]=g.exports},"2f21":function(t,e,a){"use strict";var n=a("79e5");t.exports=function(t,e){return!!t&&n(function(){e?t.call(null,function(){},1):t.call(null)})}},"2f37":function(t,e,a){var n=a("63b6");n(n.S,"Date",{now:function(){return(new Date).getTime()}})},"36bd":function(t,e,a){"use strict";var n=a("4bf8"),i=a("77f1"),r=a("9def");t.exports=function(t){var e=n(this),a=r(e.length),o=arguments.length,s=i(o>1?arguments[1]:void 0,a),c=o>2?arguments[2]:void 0,l=void 0===c?a:i(c,a);while(l>s)e[s++]=t;return e}},"55dd":function(t,e,a){"use strict";var n=a("5ca1"),i=a("d8e8"),r=a("4bf8"),o=a("79e5"),s=[].sort,c=[1,2,3];n(n.P+n.F*(o(function(){c.sort(void 0)})||!o(function(){c.sort(null)})||!a("2f21")(s)),"Array",{sort:function(t){return void 0===t?s.call(r(this)):s.call(r(this),i(t))}})},"5d6b":function(t,e,a){var n=a("e53d").parseInt,i=a("a1ce").trim,r=a("e692"),o=/^[-+]?0[xX]/;t.exports=8!==n(r+"08")||22!==n(r+"0x16")?function(t,e){var a=i(String(t),3);return n(a,e>>>0||(o.test(a)?16:10))}:n},"6c7b":function(t,e,a){var n=a("5ca1");n(n.P,"Array",{fill:a("36bd")}),a("9c6c")("fill")},7445:function(t,e,a){var n=a("63b6"),i=a("5d6b");n(n.G+n.F*(parseInt!=i),{parseInt:i})},"74bb":function(t,e,a){"use strict";var n=a("f18b"),i=a.n(n);i.a},"7f7f":function(t,e,a){var n=a("86cc").f,i=Function.prototype,r=/^\s*function ([^ (]*)/,o="name";o in i||a("9e1e")&&n(i,o,{configurable:!0,get:function(){try{return(""+this).match(r)[1]}catch(t){return""}}})},a1ce:function(t,e,a){var n=a("63b6"),i=a("25eb"),r=a("294c"),o=a("e692"),s="["+o+"]",c="​",l=RegExp("^"+s+s+"*"),u=RegExp(s+s+"*$"),p=function(t,e,a){var i={},s=r(function(){return!!o[t]()||c[t]()!=c}),l=i[t]=s?e(d):o[t];a&&(i[a]=l),n(n.P+n.F*s,"String",i)},d=p.trim=function(t,e){return t=String(i(t)),1&e&&(t=t.replace(l,"")),2&e&&(t=t.replace(u,"")),t};t.exports=p},aade:function(t,e,a){},b9e9:function(t,e,a){a("7445"),t.exports=a("584a").parseInt},e692:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},e814:function(t,e,a){t.exports=a("b9e9")},e829:function(t,e,a){a("2f37"),t.exports=a("584a").Date.now},f17f5:function(t,e,a){"use strict";var n=a("aade"),i=a.n(n);i.a},f18b:function(t,e,a){}}]);