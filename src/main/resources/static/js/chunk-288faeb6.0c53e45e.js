(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-288faeb6"],{"0a0d":function(e,t,r){e.exports=r("e829")},"0ac4":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",{staticClass:"chart-container"},[r("el-col",{staticClass:"toolbar1",staticStyle:{height:"50px","padding-left":"10px","padding-top":"5px"},attrs:{span:24}},[r("el-form",{attrs:{inline:!0}},[r("el-form-item",[r("div",{staticClass:"block"},[r("el-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd",size:"small",align:"center","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","picker-options":e.pickerOptions},model:{value:e.queryDate,callback:function(t){e.queryDate=t},expression:"queryDate"}})],1)]),r("el-form-item",[r("el-button",{attrs:{type:"primary ",size:"small",icon:"el-icon-search"},on:{click:e.getOrderSource}},[e._v("查询")])],1)],1)],1),r("el-col",{attrs:{span:24}},[r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.chartLoading,expression:"chartLoading"}],staticStyle:{width:"100%",height:"380px","text-align":"center"},attrs:{id:"orderSourceDiv"}})]),r("div",{staticStyle:{padding:"0px 10px"}},[r("el-col",{staticStyle:{"margin-top":"10px",height:"40px","line-height":"40px","background-color":"rgba(17, 146, 175, 0.18)"},attrs:{span:24}},[r("span",{staticStyle:{padding:"10px",color:"#606266"}},[e._v("详细数据"),r("i",{staticClass:"el-icon-info"})]),r("el-link",{staticStyle:{float:"right","margin-right":"10px","font-weight":"bold"},attrs:{type:"primary",underline:!1,icon:"el-icon-download"},on:{click:e.handleExport}},[e._v("\n        导出数据\n      ")])],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.orderSourceList,"highlight-current-row":"","header-cell-style":{"background-color":"#f2f2f2",color:"#3a8ee6","border-bottom":"1px #f2f2f2 solid"}}},[r("el-table-column",{attrs:{prop:"day",label:"日期",align:"center"}}),r("el-table-column",{attrs:{prop:"describe",label:"来源UI",align:"center",formatter:e.formaterText}}),r("el-table-column",{attrs:{prop:"orderingPerUi_nums",sortable:"",label:"总流量",align:"center"}}),r("el-table-column",{attrs:{prop:"orderedPerUi_nums",sortable:"",label:"订购成功流量",align:"center"}})],1)],1)],1)},a=[],i=(r("55dd"),r("cebc")),o=r("e814"),c=r.n(o),s=(r("6b54"),r("06db"),r("0a0d")),u=r.n(s),l=r("4ec3"),f=r("313e"),d=r.n(f),p={data:function(){return{queryDate:[new Date((new Date).getTime()-6048e5),new Date((new Date).getTime()-864e5)],pickerOptions:{disabledDate:function(e){return e.getTime()>u()()},shortcuts:[{text:"最近一周",onClick:function(e){var t=new Date,r=new Date;r.setTime(r.getTime()-6048e5),e.$emit("pick",[r,t])}},{text:"最近一个月",onClick:function(e){var t=new Date,r=new Date;r.setTime(r.getTime()-2592e6),e.$emit("pick",[r,t])}},{text:"最近三个月",onClick:function(e){var t=new Date,r=new Date;r.setTime(r.getTime()-7776e6),e.$emit("pick",[r,t])}}]},chartLoading:!1,tApp:"",orderSourceList:[],drawDatas:[]}},methods:{formaterText:function(e,t,r){var n="";return n=null==r||"null"==r?"暂无":r.toString(),n},handleExport:function(){var e=this;if(0===this.orderSourceList.length)return this.$message({message:"表格无数据，导出异常！",type:"warning"}),!1;Promise.all([r.e("chunk-61154d27"),r.e("chunk-0156a942")]).then(function(){var t=r("39a0"),n=t.exportExcel,a=["日期","来源UI","订购来源流量","订购成功来源流量"],i=["display_name","describe","link_num"],o=e.tOrderSourceList,c=e.formatJson(i,o);n(a,c,"订购来源excel")}.bind(null,r)).catch(r.oe)},formatJson:function(e,t){return t.map(function(t){return e.map(function(e){return t[e]})})},getOrderSource:function(){var e=this;return this.queryDate?this.queryDate[1]<this.queryDate[0]?(this.$message({showClose:!0,message:"结束日期必须大于开始日期！",type:"error"}),!1):(this.chartLoading=!0,void Object(l["D"])({startDate:this.queryDate[0],endDate:this.queryDate[1],platFormId:this.tApp.id}).then(function(t){var r=t.businessCode,n=t.resultSet;if(e.chartLoading=!1,"unauthenticated"===r)return e.$message({message:"未授权，请联系管理员！",type:"error"}),!1;"success"!==r?e.$message({message:"订购来源数据加载失败，请联系管理员！",type:"error"}):(e.orderSourceList=n,e.drawDatas=[],e.orderSourceList.forEach(function(t){var r;if(e.drawDatas.forEach(function(e){t["ui"]===e["ui"]&&(r=e)}),r)r["orderingPerUi_nums"]+=c()(t["orderingPerUi_nums"]),r["orderedPerUi_nums"]+=c()(t["orderedPerUi_nums"]);else{var n=Object(i["a"])({},t);e.drawDatas.push(n)}}),e.drawOrderChart())})):(this.$message({showClose:!0,message:"请选择查询日期范围！",type:"error"}),!1)},drawOrderChart:function(){var e=["订购触发来源","订购成功来源"],t=[],r=[],n=[];this.drawDatas.sort(function(e,t){if(e["orderingPerUi_nums"]<t["orderingPerUi_nums"])return 1}),this.drawDatas.forEach(function(e){t.push(null==e["describe"]?"暂无":e["describe"]),r.push(c()(e["orderingPerUi_nums"])),n.push(c()(e["orderedPerUi_nums"]))});var a={color:["#113366","#008899"],border:!1,legend:{orient:"vertical",left:"center",bottom:"bottom",data:e},label:{show:!0,position:"top",textStyle:{color:"black",fontSize:16,fontWeight:600}},xAxis:[{type:"category",axisTick:{show:!1},data:t}],yAxis:[{type:"value"}],series:[{name:"订购触发来源",type:"bar",data:r},{name:"订购成功来源",type:"bar",data:n}],tooltip:{trigger:"axis",axisPointer:{type:"shadow"}}};this.chartColumn=d.a.init(document.getElementById("orderSourceDiv")),this.chartColumn.clear(),this.chartColumn.setOption(a),window.onresize=this.chartColumn.resize}},created:function(){this.tApp=JSON.parse(sessionStorage.getItem("tApp")),this.getOrderSource()},mounted:function(){},updated:function(){}},h=p,m=(r("a767"),r("ec09"),r("2877")),b=Object(m["a"])(h,n,a,!1,null,"f82a7e74",null);t["default"]=b.exports},"23de":function(e,t,r){},"268f":function(e,t,r){e.exports=r("fde4")},"2f21":function(e,t,r){"use strict";var n=r("79e5");e.exports=function(e,t){return!!e&&n(function(){t?e.call(null,function(){},1):e.call(null)})}},"2f37":function(e,t,r){var n=r("63b6");n(n.S,"Date",{now:function(){return(new Date).getTime()}})},"32a6":function(e,t,r){var n=r("241e"),a=r("c3a1");r("ce7e")("keys",function(){return function(e){return a(n(e))}})},"454f":function(e,t,r){r("46a7");var n=r("584a").Object;e.exports=function(e,t,r){return n.defineProperty(e,t,r)}},"46a7":function(e,t,r){var n=r("63b6");n(n.S+n.F*!r("8e60"),"Object",{defineProperty:r("d9f6").f})},"55dd":function(e,t,r){"use strict";var n=r("5ca1"),a=r("d8e8"),i=r("4bf8"),o=r("79e5"),c=[].sort,s=[1,2,3];n(n.P+n.F*(o(function(){s.sort(void 0)})||!o(function(){s.sort(null)})||!r("2f21")(c)),"Array",{sort:function(e){return void 0===e?c.call(i(this)):c.call(i(this),a(e))}})},"5d6b":function(e,t,r){var n=r("e53d").parseInt,a=r("a1ce").trim,i=r("e692"),o=/^[-+]?0[xX]/;e.exports=8!==n(i+"08")||22!==n(i+"0x16")?function(e,t){var r=a(String(e),3);return n(r,t>>>0||(o.test(r)?16:10))}:n},"740b":function(e,t,r){},7445:function(e,t,r){var n=r("63b6"),a=r("5d6b");n(n.G+n.F*(parseInt!=a),{parseInt:a})},"85f2":function(e,t,r){e.exports=r("454f")},"8aae":function(e,t,r){r("32a6"),e.exports=r("584a").Object.keys},a1ce:function(e,t,r){var n=r("63b6"),a=r("25eb"),i=r("294c"),o=r("e692"),c="["+o+"]",s="​",u=RegExp("^"+c+c+"*"),l=RegExp(c+c+"*$"),f=function(e,t,r){var a={},c=i(function(){return!!o[e]()||s[e]()!=s}),u=a[e]=c?t(d):o[e];r&&(a[r]=u),n(n.P+n.F*c,"String",a)},d=f.trim=function(e,t){return e=String(a(e)),1&t&&(e=e.replace(u,"")),2&t&&(e=e.replace(l,"")),e};e.exports=f},a4bb:function(e,t,r){e.exports=r("8aae")},a767:function(e,t,r){"use strict";var n=r("23de"),a=r.n(n);a.a},b9e9:function(e,t,r){r("7445"),e.exports=r("584a").parseInt},bf90:function(e,t,r){var n=r("36c3"),a=r("bf0b").f;r("ce7e")("getOwnPropertyDescriptor",function(){return function(e,t){return a(n(e),t)}})},ce7e:function(e,t,r){var n=r("63b6"),a=r("584a"),i=r("294c");e.exports=function(e,t){var r=(a.Object||{})[e]||Object[e],o={};o[e]=t(r),n(n.S+n.F*i(function(){r(1)}),"Object",o)}},cebc:function(e,t,r){"use strict";var n=r("268f"),a=r.n(n),i=r("e265"),o=r.n(i),c=r("a4bb"),s=r.n(c),u=r("85f2"),l=r.n(u);function f(e,t,r){return t in e?l()(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=s()(r);"function"===typeof o.a&&(n=n.concat(o()(r).filter(function(e){return a()(r,e).enumerable}))),n.forEach(function(t){f(e,t,r[t])})}return e}r.d(t,"a",function(){return d})},e265:function(e,t,r){e.exports=r("ed33")},e692:function(e,t){e.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},e814:function(e,t,r){e.exports=r("b9e9")},e829:function(e,t,r){r("2f37"),e.exports=r("584a").Date.now},ec09:function(e,t,r){"use strict";var n=r("740b"),a=r.n(n);a.a},ed33:function(e,t,r){r("014b"),e.exports=r("584a").Object.getOwnPropertySymbols},fde4:function(e,t,r){r("bf90");var n=r("584a").Object;e.exports=function(e,t){return n.getOwnPropertyDescriptor(e,t)}}}]);